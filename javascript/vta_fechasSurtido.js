var itemGridFechas=0;function vta_fechasSurtido(){}function InitFechas(){bolOpenFechas=true;jQuery("#GRDFECHAS").clearGridData();var bolExist=false;$.ajax({type:"POST",data:"idPedido="+document.getElementById("HD_PD_ID").value,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_FechasSurtido.jsp?ID=1",success:function(datos){var lstFechas=datos.getElementsByTagName("Fechas")[0];var objFechas=lstFechas.getElementsByTagName("fechas");document.getElementById("NewGRDFECHAS").style.display="none";document.getElementById("DelGRDFECHAS").style.display="none";for(i=0;i<objFechas.length;i++){bolExist=true;var objFecha=objFechas[i];var datarowSeg={MP_ID:objFecha.getAttribute("MP_ID"),PD_ID:objFecha.getAttribute("PD_FOLIO"),PD_FECHA:objFecha.getAttribute("MP_FECHA")};itemGridFechas++;jQuery("#GRDFECHAS").addRowData(itemGridFechas,datarowSeg,"last");}if(!bolExist){alert("NO HAY FECHAS PARA ESTE PEDIDO");$("#dialogCancelar").dialog("close");}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){alert(":tarifas:"+objeto+" "+quepaso+" "+otroobj);}});}function getSurtido(){var grid=jQuery("#GRDFECHAS");var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);if(grid.getGridParam("selrow")!=null){var strMpId=lstRow.MP_ID;var strHtml=CreaHidden("MP_ID",strMpId);openFormat("PEDSURT","PDF",strHtml);}else{alert("SELECCIONE LA FECHA DEL MOVIMIENTO");}}function getPacking(){var grid=jQuery("#GRDFECHAS");var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);if(grid.getGridParam("selrow")!=null){var strMpId=lstRow.MP_ID;var strHtml=CreaHidden("MP_ID",strMpId);openFormat("PEDPACK","PDF",strHtml);}else{alert("SELECCIONE LA FECHA DEL MOVIMIENTO");}}function getEtiquetas(){var grid=jQuery("#GRDFECHAS");var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);if(grid.getGridParam("selrow")!=null){var strMpId=lstRow.MP_ID;var strHtml=CreaHidden("MP_ID",strMpId);openFormat("PEDETIQ","PDF",strHtml);}else{alert("SELECCIONE LA FECHA DEL MOVIMIENTO");}}function anulSurtido(){var grid=jQuery("#GRDFECHAS");var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);if(grid.getGridParam("selrow")!=null){var strPOST="MP_ID="+lstRow.MP_ID;$.ajax({type:"POST",data:encodeURI(strPOST),scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"VtasMov.do?id=30",success:function(dato){dato=trim(dato);if(Left(dato,3)=="OK."){alert(lstMsg[197]);}else{alert(dato);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){alert(":pto9:"+objeto+" "+quepaso+" "+otroobj);$("#dialogWait").dialog("close");}});}else{alert("SELECCIONE LA FECHA DEL MOVIMIENTO");}}