function rhh_Incidencias(){}function InitIncidencias(){$("#tabsINCID").tabs("option","disabled",[2,3,5]);if(document.getElementById("RHIN_APLICA_PREMIO_ASISTENCIA1").checked==false){document.getElementById("RHIN_PREM_ASIS_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_ASIS_PORC").style.display="";}if(document.getElementById("RHIN_APLICA_PREMIO_PUNTUALIDAD1").checked==false){document.getElementById("RHIN_PREM_PUNT_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_PUNT_PORC").style.display="";}if(document.getElementById("RHIN_APLICA_PREMIO_PRODUCTIVIDAD1").checked==false){document.getElementById("RHIN_PREM_PROD_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_PROD_PORC").style.display="";}if(document.getElementById("RHIN_APLICA_BONOS_GRATIFICACIONES1").checked==false){document.getElementById("RHIN_PREM_BONOYGRAT_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_BONOYGRAT_PORC").style.display="";}}function InitModifica(){VerHorasExtra();VerPrimaDominical();VerDiasFestivos();verFaltasDeta();verIncidencias();if(document.getElementById("RHIN_APLICA_PREMIO_ASISTENCIA1").checked==false){document.getElementById("RHIN_PREM_ASIS_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_ASIS_PORC").style.display="";}if(document.getElementById("RHIN_APLICA_PREMIO_PUNTUALIDAD1").checked==false){document.getElementById("RHIN_PREM_PUNT_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_PUNT_PORC").style.display="";}if(document.getElementById("RHIN_APLICA_PREMIO_PRODUCTIVIDAD1").checked==false){document.getElementById("RHIN_PREM_PROD_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_PROD_PORC").style.display="";}if(document.getElementById("RHIN_APLICA_BONOS_GRATIFICACIONES1").checked==false){document.getElementById("RHIN_PREM_BONOYGRAT_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_BONOYGRAT_PORC").style.display="";}}function OpnDiagEmp1(){OpnOpt("rhh_emplea","grid","dialogCte",false,false);}function ShowNominas(){OpnOpt("NEW_NOMINA","grid","dialog2",false,false);}function SaveHorasExtra(){$("#dialogWait").dialog("open");var intHoras=document.getElementById("RHIN_HORAS_EXTRAS").value;var strFecha=document.getElementById("RHIN_FECHA").value;if(intHoras<=0){alert("Ingrese un numero de horas laboradas");document.getElementById("RHIN_HORAS_EXTRAS").focus();}if(strFecha==""){alert("Ingrese la fecha en que se laboraron las horas extra");document.getElementById("RHIN_FECHA").focus();}var strPost="IdIncidencia="+document.getElementById("RHIN_ID").value;strPost+="&Horas="+intHoras;strPost+="&Fecha="+strFecha;$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=1",success:function(datos){if(datos.substring(0,2)=="OK"){var grid=jQuery("#GRID_TE");grid.trigger("reloadGrid");alert("Alta exitosa!!");}else{if(datos.substring(0,2)=="NO"){alert("Error al guardar");}else{alert(datos);}}VerHorasExtra();$("#dialogWait").dialog("close");},error:function(){alert("Error al guardar!");$("#dialogWait").dialog("close");}});}function delHorasExtra(){var grid=jQuery("#GRID_TE");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var IdRen=lstRow.RHE_ID;console.log(id);if(confirm("¿Confirma borrar las horas extra?")){$("#dialogWait").dialog("open");grid.delRowData(grid.getGridParam("selrow"));$.ajax({type:"POST",data:"idInc="+IdRen,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=2",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Horas extra Borradas!!");}else{alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){$("#dialogWait").dialog("close");alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}}}function VerHorasExtra(){var itemIdCob=0;var strPost="idInc="+document.getElementById("RHIN_ID").value;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_Incidencias.jsp?id=3",success:function(datos){jQuery("#GRID_TE").clearGridData();var objofrt=datos.getElementsByTagName("Incidencias")[0];var lstProms=objofrt.getElementsByTagName("datos");for(var i=0;i<lstProms.length;i++){var obj=lstProms[i];var dataRow={RHE_ID:obj.getAttribute("RHE_ID"),RHE_HORAS:obj.getAttribute("RHE_NUM_HORAS"),RHE_FECHA:obj.getAttribute("RHE_FECHA")};itemIdCob++;jQuery("#GRID_TE").addRowData(itemIdCob,dataRow,"last");}$("#dialogWait").dialog("close");}});}function SavePrimaDom(){var strFecha=document.getElementById("RHIN_DIAS_TRABAJADOS_DOMINGOS").value;if(strFecha==""){alert("Ingrese los domingos que se trabajaron");document.getElementById("RHIN_DIAS_TRABAJADOS_DOMINGOS").focus();}var strPost="IdIncidencia="+document.getElementById("RHIN_ID").value;strPost+="&Fecha="+strFecha;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=4",success:function(datos){if(datos.substring(0,2)=="OK"){var grid=jQuery("#GRID_TE");grid.trigger("reloadGrid");alert("Alta exitosa!!");}else{if(datos.substring(0,2)=="NO"){alert("Error al guardar");}else{alert(datos);}}VerPrimaDominical();$("#dialogWait").dialog("close");},error:function(){alert("Error al guardar!");$("#dialogWait").dialog("close");}});}function delPDominical(){var grid=jQuery("#GRID_PD");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var IdRen=lstRow.PD_ID;if(confirm("¿Confirma borrar el domingo trabajado?")){$("#dialogWait").dialog("open");grid.delRowData(grid.getGridParam("selrow"));$.ajax({type:"POST",data:"idInc="+IdRen,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=5",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Horas extra Borradas!!");}else{alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){$("#dialogWait").dialog("close");alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}}}function VerPrimaDominical(){var itemIdCob=0;var strPost="idInc="+document.getElementById("RHIN_ID").value;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_Incidencias.jsp?id=6",success:function(datos){jQuery("#GRID_PD").clearGridData();var objPdom=datos.getElementsByTagName("PDominical")[0];var lstProms=objPdom.getElementsByTagName("Domingos");for(var i=0;i<lstProms.length;i++){var obj=lstProms[i];var dataRow={PD_ID:obj.getAttribute("PD_ID"),PD_DOMINGO_TRABAJADO:obj.getAttribute("RHPD_FECHA")};itemIdCob++;jQuery("#GRID_PD").addRowData(itemIdCob,dataRow,"last");}$("#dialogWait").dialog("close");}});}function SaveDiasFestivos(){var strFecha=document.getElementById("RHIN_DIA_FESTIVO_FECHA").value;if(strFecha==""){alert("Ingrese los días festivos que se trabajaron");document.getElementById("RHIN_DIA_FESTIVO_FECHA").focus();}var strPost="IdIncidencia="+document.getElementById("RHIN_ID").value;strPost+="&Fecha="+strFecha;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=7",success:function(datos){if(datos.substring(0,2)=="OK"){var grid=jQuery("#GRID_DF");grid.trigger("reloadGrid");alert("Alta exitosa!!");}else{if(datos.substring(0,2)=="NO"){alert("Error al guardar");}else{alert(datos);}}VerDiasFestivos();$("#dialogWait").dialog("close");},error:function(){$("#dialogWait").dialog("close");alert("Error al guardar!");
}});}function delDiasFestivos(){var grid=jQuery("#GRID_DF");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var IdRen=lstRow.DF_ID;if(confirm("¿Confirma borrar el Día festivo?")){grid.delRowData(grid.getGridParam("selrow"));$("#dialogWait").dialog("open");$.ajax({type:"POST",data:"idInc="+IdRen,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=8",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Días festivos Borrados!!");}else{alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){$("#dialogWait").dialog("close");alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}}}function VerDiasFestivos(){var itemIdCob=0;var strPost="idInc="+document.getElementById("RHIN_ID").value;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_Incidencias.jsp?id=9",success:function(datos){jQuery("#GRID_DF").clearGridData();var objPdom=datos.getElementsByTagName("DFestivos")[0];var lstProms=objPdom.getElementsByTagName("datos");for(var i=0;i<lstProms.length;i++){var obj=lstProms[i];var dataRow={DF_ID:obj.getAttribute("RHDF_ID"),DF_FECHA:obj.getAttribute("RHDF_FECHA")};itemIdCob++;jQuery("#GRID_DF").addRowData(itemIdCob,dataRow,"last");}$("#dialogWait").dialog("close");}});}function ObtienePorcentajes(obj1){if(obj1==1){if(document.getElementById("RHIN_APLICA_PREMIO_ASISTENCIA1").checked==false){document.getElementById("RHIN_PREM_ASIS_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_ASIS_PORC").style.display="";}}if(obj1==2){if(document.getElementById("RHIN_APLICA_PREMIO_PUNTUALIDAD1").checked==false){document.getElementById("RHIN_PREM_PUNT_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_PUNT_PORC").style.display="";}}if(obj1==3){if(document.getElementById("RHIN_APLICA_PREMIO_PRODUCTIVIDAD1").checked==false){document.getElementById("RHIN_PREM_PROD_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_PROD_PORC").style.display="";}}if(obj1==4){if(document.getElementById("RHIN_APLICA_BONOS_GRATIFICACIONES1").checked==false){document.getElementById("RHIN_PREM_BONOYGRAT_PORC").style.display="none";}else{document.getElementById("RHIN_PREM_BONOYGRAT_PORC").style.display="";}}var strPost="opc="+obj1;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_Incidencias.jsp?id=10",success:function(datos){var objPdom=datos.getElementsByTagName("porcentajes")[0];var lstProms=objPdom.getElementsByTagName("porcentajes_deta");for(var i=0;i<lstProms.length;i++){var obj=lstProms[i];if(obj1==1){document.getElementById("RHIN_PREM_ASIS_PORC").value=obj.getAttribute("dblPorcentaje");}if(obj1==2){document.getElementById("RHIN_PREM_PUNT_PORC").value=obj.getAttribute("dblPorcentaje");}if(obj1==3){document.getElementById("RHIN_PREM_PROD_PORC").value=obj.getAttribute("dblPorcentaje");}if(obj1==4){document.getElementById("RHIN_PREM_BONOYGRAT_PORC").value=obj.getAttribute("dblPorcentaje");}}$("#dialogWait").dialog("close");}});}function saveFaltasDetalle(){var strFecha=document.getElementById("RFD_FECHA").value;var strTipoFalta=document.getElementById("RTF_ID").value;if(strFecha==""){alert("Ingrese la fecha de la falta a registrar");document.getElementById("RFD_FECHA").focus();}else{var strPost="IdIncidencia="+document.getElementById("RHIN_ID").value;strPost+="&Fecha="+strFecha;strPost+="&TipoFalta="+strTipoFalta;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=11",success:function(datos){if(datos.substring(0,2)=="OK"){var grid=jQuery("#GRID_FALTASDETA");grid.trigger("reloadGrid");alert("Alta exitosa!!");}else{if(datos.substring(0,2)=="NO"){alert("Error al guardar");}else{alert(datos);}}verFaltasDeta();$("#dialogWait").dialog("close");},error:function(){alert("Error al guardar!");$("#dialogWait").dialog("close");}});}}function verFaltasDeta(){var itemIdCob=0;var strPost="idInc="+document.getElementById("RHIN_ID").value;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_Incidencias.jsp?id=12",success:function(datos){jQuery("#GRID_FALTASDETA").clearGridData();var objPdom=datos.getElementsByTagName("FaltasDeta")[0];var lstProms=objPdom.getElementsByTagName("datos");for(var i=0;i<lstProms.length;i++){var obj=lstProms[i];var dataRow={RFD_ID:obj.getAttribute("RFD_ID"),RFD_FECHA:obj.getAttribute("RFD_FECHA"),RFD_TIPO:obj.getAttribute("RTF_ID")};itemIdCob++;jQuery("#GRID_FALTASDETA").addRowData(itemIdCob,dataRow,"last");}$("#dialogWait").dialog("close");}});}function delFaltaDetalle(){var grid=jQuery("#GRID_FALTASDETA");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var IdFalta=lstRow.RFD_ID;if(confirm("¿Confirma borrar la falta?")){grid.delRowData(grid.getGridParam("selrow"));$("#dialogWait").dialog("open");$.ajax({type:"POST",data:"idFalta="+IdFalta,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=13",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Falta Borrada!!");}else{alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){$("#dialogWait").dialog("close");alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}}}function saveIncapacidad(){var strFecha=document.getElementById("RID_FECHA").value;var strNumDias=document.getElementById("RHIN_DIAS_INCAPACIDAD").value;var strTCaso=document.getElementById("RTC_ID").value;var strTDictamen=document.getElementById("RTD_ID").value;var strTRiesgo=document.getElementById("RTR_ID").value;var strTIncapacidad=document.getElementById("RTI_ID").value;var strCertificado=document.getElementById("RHIN_CERTIFICADO_INCAPACIDAD").value;if(strFecha==""){alert("Ingrese la fecha de la incapacidad a registrar");document.getElementById("RID_FECHA").focus();}else{var strPost="IdIncidencia="+document.getElementById("RHIN_ID").value;strPost+="&Fecha="+strFecha;strPost+="&NumDias="+strNumDias;strPost+="&TCaso="+strTCaso;strPost+="&TDictamen="+strTDictamen;strPost+="&TRiesgo="+strTRiesgo;strPost+="&TIncapacidad="+strTIncapacidad;strPost+="&Certificado="+strCertificado;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=14",success:function(datos){if(datos.substring(0,2)=="OK"){var grid=jQuery("#GRD_INCAPDETA");grid.trigger("reloadGrid");alert("Alta exitosa!!");}else{if(datos.substring(0,2)=="NO"){alert("Error al guardar");}else{alert(datos);}}verIncidencias();$("#dialogWait").dialog("close");},error:function(){$("#dialogWait").dialog("close");alert("Error al guardar!");}});}}function delIncapacidad(){var grid=jQuery("#GRD_INCAPDETA");var incid=document.getElementById("RHIN_ID").value;if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var IdIncap=lstRow.RID_ID;var numDias=lstRow.RID_NUM_DIAS;if(confirm("¿Confirma borrar la incapacidad?")){grid.delRowData(grid.getGridParam("selrow"));$("#dialogWait").dialog("open");$.ajax({type:"POST",data:"idIncapacidad="+IdIncap+"&numDias="+numDias+"&Incid="+incid,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_Incidencias.jsp?id=16",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Incapacidad Borrada!!");
}else{alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){$("#dialogWait").dialog("close");alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}}}function verIncidencias(){var itemIdCob=0;var strPost="idInc="+document.getElementById("RHIN_ID").value;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_Incidencias.jsp?id=15",success:function(datos){jQuery("#GRD_INCAPDETA").clearGridData();var objPdom=datos.getElementsByTagName("IncapacidadesDeta")[0];var lstProms=objPdom.getElementsByTagName("datos");for(var i=0;i<lstProms.length;i++){var obj=lstProms[i];var dataRow={RID_ID:obj.getAttribute("RID_ID"),RID_FECHA:obj.getAttribute("RID_FECHA"),RID_NUM_DIAS:obj.getAttribute("RID_NUM_DIAS")};itemIdCob++;jQuery("#GRD_INCAPDETA").addRowData(itemIdCob,dataRow,"last");}$("#dialogWait").dialog("close");}});}