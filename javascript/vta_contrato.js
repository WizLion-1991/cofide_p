var intTipoConsulta=0;var itemComp=0;function vta_contrato(){}function OpnDiagCte(){intTipoConsulta=0;OpnOpt("CLIENTES","grid","dialogCte",false,false);}function OpnDiagCte2(){intTipoConsulta=1;OpnOpt("CLIENTES","grid","dialogCte",false,false);}function openFormatCont(strNomForm,strTipo,strHtmlControl,strMaskFolio){var strHtml='<form action="ERP_Contrato.jsp" method="post" target="_blank" id="formSend">';strHtml+=CreaHidden("NomForm",strNomForm);if(strMaskFolio!=undefined){strHtml+=CreaHidden("MASK_FOLIO",strMaskFolio);}strHtml+=CreaHidden("report",strTipo);strHtml+=strHtmlControl;var grid=jQuery("#CONA");if(grid.getGridParam("selrow")!=null){var lstRow=grid.getRowData(grid.getGridParam("selrow"));strHtml+=CreaHidden("CTOA_ID",lstRow.CTOA_ID);}strHtml+="</form>";document.getElementById("formHidden").innerHTML=strHtml;document.getElementById("formSend").submit();}function openFormatpagare(strNomForm,strTipo,strHtmlControl,strMaskFolio){var strHtml='<form action="ERP_Pagare.jsp" method="post" target="_blank" id="formSend">';strHtml+=CreaHidden("NomForm",strNomForm);if(strMaskFolio!=undefined){strHtml+=CreaHidden("MASK_FOLIO",strMaskFolio);}strHtml+=CreaHidden("report",strTipo);strHtml+=strHtmlControl;var grid=jQuery("#CONA");if(grid.getGridParam("selrow")!=null){var lstRow=grid.getRowData(grid.getGridParam("selrow"));strHtml+=CreaHidden("CTOA_ID",lstRow.CTOA_ID);}strHtml+="</form>";document.getElementById("formHidden").innerHTML=strHtml;document.getElementById("formSend").submit();}function openFormatcv(strNomForm,strTipo,strHtmlControl,strMaskFolio){var strHtml='<form action="ERP_ContratoCV.jsp" method="post" target="_blank" id="formSend">';strHtml+=CreaHidden("NomForm",strNomForm);if(strMaskFolio!=undefined){strHtml+=CreaHidden("MASK_FOLIO",strMaskFolio);}strHtml+=CreaHidden("report",strTipo);strHtml+=strHtmlControl;var grid=jQuery("#CONA");if(grid.getGridParam("selrow")!=null){var lstRow=grid.getRowData(grid.getGridParam("selrow"));strHtml+=CreaHidden("CTOA_ID",lstRow.CTOA_ID);}strHtml+="</form>";document.getElementById("formHidden").innerHTML=strHtml;document.getElementById("formSend").submit();}function openFormatpagarearre(strNomForm,strTipo,strHtmlControl,strMaskFolio){var strHtml='<form action="ERP_PagareArrendamiento.jsp" method="post" target="_blank" id="formSend">';strHtml+=CreaHidden("NomForm",strNomForm);if(strMaskFolio!=undefined){strHtml+=CreaHidden("MASK_FOLIO",strMaskFolio);}strHtml+=CreaHidden("report",strTipo);strHtml+=strHtmlControl;var grid=jQuery("#CONA");if(grid.getGridParam("selrow")!=null){var lstRow=grid.getRowData(grid.getGridParam("selrow"));strHtml+=CreaHidden("CTOA_ID",lstRow.CTOA_ID);}strHtml+="</form>";document.getElementById("formHidden").innerHTML=strHtml;document.getElementById("formSend").submit();}function ImprimeResumenAnexo(){var grid=jQuery("#CONA");if(grid.getGridParam("selrow")!=null){var lstRow=grid.getRowData(grid.getGridParam("selrow"));Abrir_Link("JasperReport?REP_ID=44&boton_1=PDF&CTOA_ID="+lstRow.CTOA_ID,"_reporte",500,600,0,0);}}function addGrid_RFC(){var strPOST="";var strRFC=d.getElementById("RFC_CONT_RFC").value;var strRazonSocial=d.getElementById("RFC_CONT_RAZONSOCIAL").value;var intIdContratos=d.getElementById("CTOA_ID").value;var intIdCliente=d.getElementById("CTE_ID").value;strPOST+="&identificador=1";strPOST+="&strRFC="+strRFC;strPOST+="&strRazonSocial="+strRazonSocial;strPOST+="&intIdContratos="+intIdContratos;strPOST+="&intIdCliente="+intIdCliente;if(strRFC!=""){if(strRazonSocial!=""){$.ajax({type:"POST",data:encodeURI(strPOST),scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"vta_contrato.jsp?ID=1",success:function(datoVal){var objXML=datoVal.getElementsByTagName("vta_rfc_contratados")[0];if(objXML!=null){var lstTiks=objXML.getElementsByTagName("vta_rfc_contratados1");for(var i=0;i<lstTiks.length;i++){var obj=lstTiks[i];var mostrar={RFC_CONT_RFC:obj.getAttribute("RFC_CONT_RFC"),RFC_CONT_RAZONSOCIAL:obj.getAttribute("RFC_CONT_RAZONSOCIAL"),RFC_CONT_ID:obj.getAttribute("RFC_CONT_ID")};jQuery("#CONA_GRID_RFC").addRowData(i,mostrar,"last");}}else{alert("LA "+strNomDoc+" "+obj.value+" NO EXISTE");}d.getElementById("RFC_CONT_RFC").value="";d.getElementById("RFC_CONT_RAZONSOCIAL").value="";},error:function(objeto,quepaso,otroobj){alert(":pto9:"+objeto+" "+quepaso+" "+otroobj);$("#dialogWait").dialog("close");}});}else{alert("EL campo Razon Social debe estar lleno");}}else{alert("EL campo RFC debe estar lleno");}}function delGrid_RFC(){var grid=jQuery("#CONA_GRID_RFC");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var strDes=lstRow.RFC_CONT_ID;if(confirm("¿Confirma que desea borrar el producto:"+" "+strDes)){grid.delRowData(grid.getGridParam("selrow"));var strPOST="";strPOST+="&identificador=2";strPOST+="&IdGridDelete="+strDes;$.ajax({type:"POST",data:encodeURI(strPOST),scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"vta_contrato.jsp?ID=1",success:function(datos){if(datos.substring(0,2)=="OK"){}else{alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){alert(":pto9:"+objeto+" "+quepaso+" "+otroobj);$("#dialogWait").dialog("close");}});}}else{alert("Selecciona un registro el la tabla");}}function delGrid_TimbresFiscales(){var grid=jQuery("#CONA_GRID_TMFS");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var strDes=lstRow.TIMBFISC_ID;if(confirm("¿Confirma que desea borrar el producto:"+" "+strDes)){grid.delRowData(grid.getGridParam("selrow"));var strPOST="";strPOST+="&identificador=2";strPOST+="&IdGridDelete="+strDes;$.ajax({type:"POST",data:encodeURI(strPOST),scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"vta_contrato.jsp?ID=2",success:function(datos){if(datos.substring(0,2)=="OK"){}else{alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){alert(":pto9:"+objeto+" "+quepaso+" "+otroobj);$("#dialogWait").dialog("close");}});}}else{alert("Selecciona un registro el la tabla");}}function addGrid_TimbresFiscales(){var strPOST="";var intFecha=d.getElementById("TIMBFISC_FECHA").value;var intVigencia=d.getElementById("TIMBFISC_VIGENCIA").value;var intFolios=d.getElementById("TIMBFISC_NUM_FOLIOS").value;var intIdContratos=d.getElementById("CTOA_ID").value;var intIdCliente=d.getElementById("CTE_ID").value;strPOST+="&identificador=1";strPOST+="&intFecha="+intFecha;strPOST+="&intVigencia="+intVigencia;strPOST+="&intFolios="+intFolios;strPOST+="&intIdContratos="+intIdContratos;strPOST+="&intIdCliente="+intIdCliente;if(intFecha!=""){if(intVigencia!=""){if(intFolios!=""){$.ajax({type:"POST",data:encodeURI(strPOST),scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"vta_contrato.jsp?ID=2",success:function(datoVal){var objXML=datoVal.getElementsByTagName("vta_timbres_fiscales")[0];if(objXML!=null){var lstTiks=objXML.getElementsByTagName("vta_timbres_fiscales1");for(var i=0;i<lstTiks.length;i++){var obj=lstTiks[i];var mostrar={TIMBFISC_ID:obj.getAttribute("TIMBFISC_ID"),TIMBFISC_FECHA:obj.getAttribute("TIMBFISC_FECHA"),TIMBFISC_VIGENCIA:obj.getAttribute("TIMBFISC_VIGENCIA"),TIMBFISC_NUM_FOLIOS:obj.getAttribute("TIMBFISC_NUM_FOLIOS")};jQuery("#CONA_GRID_TMFS").addRowData(i,mostrar,"last");}}else{alert("LA "+strNomDoc+" "+obj.value+" NO EXISTE");}d.getElementById("TIMBFISC_FECHA").value="";d.getElementById("TIMBFISC_VIGENCIA").value="";d.getElementById("TIMBFISC_NUM_FOLIOS").value="";},error:function(objeto,quepaso,otroobj){alert(":pto9:"+objeto+" "+quepaso+" "+otroobj);$("#dialogWait").dialog("close");}});}else{alert("EL campo NUMERO DE FOLIOS debe estar lleno");}}else{alert("EL campo VIGENCIA debe estar lleno");}}else{alert("EL campo FECHA debe estar lleno");}}function showGrids_TimbresFiscales(){var strPOST="";
var intIdContratos=d.getElementById("CTOA_ID").value;strPOST+="&identificador=3";strPOST+="&intIdContratos="+intIdContratos;$.ajax({type:"POST",data:encodeURI(strPOST),scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"vta_contrato.jsp?ID=2",success:function(datoVal){var objXML=datoVal.getElementsByTagName("vta_timbres_fiscales")[0];if(objXML!=null){var lstTiks=objXML.getElementsByTagName("vta_timbres_fiscales1");for(var i=0;i<lstTiks.length;i++){var obj=lstTiks[i];var mostrar={TIMBFISC_ID:obj.getAttribute("TIMBFISC_ID"),TIMBFISC_FECHA:obj.getAttribute("TIMBFISC_FECHA"),TIMBFISC_VIGENCIA:obj.getAttribute("TIMBFISC_VIGENCIA"),TIMBFISC_NUM_FOLIOS:obj.getAttribute("TIMBFISC_NUM_FOLIOS")};jQuery("#CONA_GRID_TMFS").addRowData(i,mostrar,"last");}}else{alert("LA "+strNomDoc+" "+obj.value+" NO EXISTE");}d.getElementById("TIMBFISC_FECHA").value="";d.getElementById("TIMBFISC_VIGENCIA").value="";d.getElementById("TIMBFISC_NUM_FOLIOS").value="";},error:function(objeto,quepaso,otroobj){alert(":pto9:"+objeto+" "+quepaso+" "+otroobj);$("#dialogWait").dialog("close");}});}function showGrids_RFC(){var strPOST="";var intIdContratos=d.getElementById("CTOA_ID").value;strPOST+="&identificador=3";strPOST+="&intIdContratos="+intIdContratos;$.ajax({type:"POST",data:encodeURI(strPOST),scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"vta_contrato.jsp?ID=1",success:function(datoVal){var objXML=datoVal.getElementsByTagName("vta_rfc_contratados")[0];if(objXML!=null){var lstTiks=objXML.getElementsByTagName("vta_rfc_contratados1");for(var i=0;i<lstTiks.length;i++){var obj=lstTiks[i];var mostrar={RFC_CONT_RFC:obj.getAttribute("RFC_CONT_RFC"),RFC_CONT_RAZONSOCIAL:obj.getAttribute("RFC_CONT_RAZONSOCIAL"),RFC_CONT_ID:obj.getAttribute("RFC_CONT_ID")};jQuery("#CONA_GRID_RFC").addRowData(i,mostrar,"last");}}else{alert("LA "+strNomDoc+" "+obj.value+" NO EXISTE");}d.getElementById("RFC_CONT_RFC").value="";d.getElementById("RFC_CONT_RAZONSOCIAL").value="";},error:function(objeto,quepaso,otroobj){alert(":pto9:"+objeto+" "+quepaso+" "+otroobj);$("#dialogWait").dialog("close");}});}function mostrar_grids(){showGrids_RFC();showGrids_TimbresFiscales();}