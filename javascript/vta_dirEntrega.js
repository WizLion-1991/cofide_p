function vta_dirEntrega(){}function InitDirecciones(){var idx=document.getElementById("FCT_ID").value;setTimeout("LoadDirecciones_pto("+idx+")",1000);document.getElementById("BTN_SAVE").parentNode.parentNode.style.display="none";document.getElementById("BTN_CANCEL").parentNode.parentNode.style.display="none";document.getElementById("BTN_NEW").parentNode.parentNode.style.display="";document.getElementById("BTN_DEL").parentNode.parentNode.style.display="";}function ObtenDireciones_pto(){var bolExist=false;$.ajax({type:"POST",data:"ct_id="+document.getElementById("FCT_ID").value,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_DireccionesEntrega.jsp?ID=1",success:function(datos){var lstDirecciones=datos.getElementsByTagName("Direcciones")[0];var lstDireccion=lstDirecciones.getElementsByTagName("direcciones");var objDir=document.getElementById("CT_DIRENTREGA");select_clear(objDir);for(j=0;j<lstDireccion.length;j++){bolExist=true;var objP=lstDireccion[j];if(j==0){select_add(objDir,"<-Seleccione->",0);}select_add(objDir,objP.getAttribute("dir_cliente"),objP.getAttribute("id_dir"));}if(bolExist==false){select_add(objDir,"<--No existen mas Direcciones-->",0);}},error:function(objeto,quepaso,otroobj){alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}function status_Fields(s){var strCalle=document.getElementById("CDE_CALLE");var strColonia=document.getElementById("CDE_COLONIA");var strLocalidad=document.getElementById("CDE_LOCALIDAD");var strMunicipio=document.getElementById("CDE_MUNICIPIO");var strEstado=document.getElementById("CDE_ESTADO");var strCp=document.getElementById("CDE_CP");var strNumero=document.getElementById("CDE_NUMERO");var strNumInt=document.getElementById("CDE_NUMINT");var strTelefono=document.getElementById("CDE_TELEFONO1");var strNombre=document.getElementById("CDE_NOMBRE");var strEmail=document.getElementById("CDE_EMAIL");var strDesc=document.getElementById("CDE_DESCRIPCION");if(s=="mostrar"){strCalle.parentNode.parentNode.style.display="";strColonia.parentNode.parentNode.style.display="";strLocalidad.parentNode.parentNode.style.display="";strMunicipio.parentNode.parentNode.style.display="";strEstado.parentNode.parentNode.style.display="";strCp.parentNode.parentNode.style.display="";strNumero.parentNode.parentNode.style.display="";strNumInt.parentNode.parentNode.style.display="";strTelefono.parentNode.parentNode.style.display="";strNombre.parentNode.parentNode.style.display="";strEmail.parentNode.parentNode.style.display="";strDesc.parentNode.parentNode.style.display="";}if(s=="ocultar"){strCalle.parentNode.parentNode.style.display="none";strColonia.parentNode.parentNode.style.display="none";strLocalidad.parentNode.parentNode.style.display="none";strMunicipio.parentNode.parentNode.style.display="none";strEstado.parentNode.parentNode.style.display="none";strCp.parentNode.parentNode.style.display="none";strNumero.parentNode.parentNode.style.display="none";strNumInt.parentNode.parentNode.style.display="none";strTelefono.parentNode.parentNode.style.display="none";strNombre.parentNode.parentNode.style.display="none";strEmail.parentNode.parentNode.style.display="none";strDesc.parentNode.parentNode.style.display="none";}if(s=="limpiar"){strCalle.value="";strColonia.value="";strLocalidad.value="";strMunicipio.value="";strEstado.value="";strCp.value="";strNumero.value="";strNumInt.value="";strTelefono.value="";strNombre.value="";strEmail.value="";strDesc.value="";}}function newDir_pto(){status_Fields("mostrar");document.getElementById("BTN_SAVE").parentNode.parentNode.style.display="";document.getElementById("BTN_CANCEL").parentNode.parentNode.style.display="";document.getElementById("BTN_NEW").parentNode.parentNode.style.display="none";document.getElementById("BTN_DEL").parentNode.parentNode.style.display="none";}function cancelDir_pto(){status_Fields("ocultar");document.getElementById("BTN_SAVE").parentNode.parentNode.style.display="none";document.getElementById("BTN_CANCEL").parentNode.parentNode.style.display="none";document.getElementById("BTN_NEW").parentNode.parentNode.style.display="";document.getElementById("BTN_DEL").parentNode.parentNode.style.display="";status_Fields("limpiar");}function saveDir_pto(){if(document.getElementById("FCT_ID").value==""||document.getElementById("FCT_ID").value=="0"){alert("ATENCIÓN: Primero debes seleccionar al cliente para asignarle mas direcciones de entrega.");}else{var strPost="";if(validaDatos()!=0){strPost="&CDE_CALLE="+document.getElementById("CDE_CALLE").value;strPost+="&CDE_COLONIA="+document.getElementById("CDE_COLONIA").value;strPost+="&CDE_LOCALIDAD="+document.getElementById("CDE_LOCALIDAD").value;strPost+="&CDE_MUNICIPIO="+document.getElementById("CDE_MUNICIPIO").value;strPost+="&CDE_ESTADO="+document.getElementById("CDE_ESTADO").value;strPost+="&CDE_CP="+document.getElementById("CDE_CP").value;strPost+="&CDE_NUMERO="+document.getElementById("CDE_NUMERO").value;strPost+="&CDE_NUMINT="+document.getElementById("CDE_NUMINT").value;strPost+="&CDE_TELEFONO1="+document.getElementById("CDE_TELEFONO1").value;strPost+="&CDE_NOMBRE="+document.getElementById("CDE_NOMBRE").value;strPost+="&CDE_EMAIL="+document.getElementById("CDE_EMAIL").value;strPost+="&CDE_DESCRIPCION="+document.getElementById("CDE_DESCRIPCION").value;strPost+="&CT_ID="+document.getElementById("FCT_ID").value;$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_DireccionesEntrega.jsp?ID=2",success:function(datos){if(datos.substring(0,2)=="OK"){LoadDirecciones_pto(document.getElementById("FCT_ID").value);status_Fields("ocultar");status_Fields("limpiar");}else{alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}}}function validaDatos(){var strCalle=document.getElementById("CDE_CALLE");var strColonia=document.getElementById("CDE_COLONIA");var strLocalidad=document.getElementById("CDE_LOCALIDAD");var strMunicipio=document.getElementById("CDE_MUNICIPIO");var strEstado=document.getElementById("CDE_ESTADO");var strCp=document.getElementById("CDE_CP");var strNumero=document.getElementById("CDE_NUMERO");var strNumInt=document.getElementById("CDE_NUMINT");var strTelefono=document.getElementById("CDE_TELEFONO1");var strNombre=document.getElementById("CDE_NOMBRE");var strEmail=document.getElementById("CDE_EMAIL");var strDesc=document.getElementById("CDE_DESCRIPCION");if(strCalle.value==""){alert("Atención: Captura la calle");strCalle.focus();return 0;}if(strColonia.value==""){alert("Atención: Captura la Colonia");strColonia.focus();return 0;}if(strMunicipio.value==""){alert("Atención: Captura el municipio o Delegación");strMunicipio.focus();return 0;}if(strEstado.value==""){alert("Atención: Captura el Estado");strEstado.focus();return 0;}if(strCp.value==""){alert("Atención: Captura el Codigo Postal");strCp.focus();return 0;}if(strCp.strTelefono==""){alert("Atención: Captura algun número telefonico");strTelefono.focus();return 0;}if(strDesc.value==""){alert("Atención: Agrega alguna referencia Ej: Entre calle 1 y 3");strDesc.focus();return 0;}return 1;}function LoadDirecciones_pto(idx){var grid=jQuery("#grd_Direcciones_pto");grid.setGridParam({url:"CIP_TablaOp.jsp?ID=5&opnOpt=DIRENT_PTO&_search=true&CT_ID="+idx});grid.trigger("reloadGrid");}function delDireccion_pto(){var grid=jQuery("#grd_Direcciones");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var idDir=lstRow.CDE_ID;if(getUso(idDir)!=true){if(confirm("Atención: Confirma que desea eliminar la dirección")){grid.delRowData(grid.getGridParam("selrow"));deleteDireccion(idDir);}}else{alert("Atención: Esta dirección no puede ser borrada, ya se uso en algunos documentos");}}else{alert("Selecciona un registro el la tabla");}}function getUso(idDir){$.ajax({type:"POST",data:"id_dir="+idDir,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_DireccionesEntrega.jsp?ID=3",success:function(datos){if(datos.substring(0,2)=="OK"){return true;
}else{return false;alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}function deleteDireccion(idDir){$.ajax({type:"POST",data:"dir_id="+idDir,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_DireccionesEntrega.jsp?ID=4",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Dirección de entrega Eliminada...");}else{alert(datos);}$("#dialogWait").dialog("close");},error:function(objeto,quepaso,otroobj){alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}function dblClickDirecciones_pto(id){var strNomMain=objMap.getNomMain();var grid=jQuery("#grd_Direcciones_pto");var lstVal=grid.getRowData(id);if(strNomMain=="DIRENT_PTO"){OpnEdit(document.getElementById("Ed"+strNomMain));}else{if(strNomMain=="VENTAS"){document.getElementById("CT_ID_DIR").value=lstVal.CDE_ID;document.getElementById("CT_DIRENTREGA").value=lstVal.CDE_CALLE+" "+lstVal.CDE_COLONIA+" "+lstVal.CDE_MUNICIPIO+" "+lstVal.CDE_ESTADO;}}$("#dialogCte").dialog("close");}