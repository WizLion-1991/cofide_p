var itemId=0;var lastselBco=0;var idProd=0;function vta_prodcat1(){}function UpImageCat1(strNomFile){ValidaClean(strNomFile);if(document.getElementById(strNomFile).value==""){ValidaShow(strNomFile,lstMsg[13]);return false;}var strExtencion=Right(document.getElementById(strNomFile).value.toUpperCase(),3);if(strExtencion=="PNG"||strExtencion=="JPG"){ajaxImageCat1(strNomFile,document.getElementById("PC_ID").value);return true;}else{ValidaShow(strNomFile,"Formato no valido solo: .png o .jpg");return false;}return true;}function ajaxImageCat1(strNomFile,intPC_ID){$("#dialogWait").dialog("open");$.ajaxFileUpload({url:"ERP_UPImageCat1.jsp?PC_ID="+intPC_ID,secureuri:false,fileElementId:strNomFile,dataType:"json",success:function(data,status){if(typeof(data.error)!="undefined"){if(data.error!=""){alert(data.error);}}$("#dialogWait").dialog("close");alert("Imagen guardada Correctamente!");var strNomFileX="/iCommerce/images/ecomm/"+GetNomFileCat1(document.getElementById(strNomFile).value);if(strNomFile=="PC_IMSGEN1"){document.getElementById("PC_NOMIMG1").value=strNomFileX;}if(strNomFile=="PC_IMSGEN2"){document.getElementById("PC_NOMIMG2").value=strNomFileX;}if(strNomFile=="PC_IMSGEN3"){document.getElementById("PC_NOMIMG3").value=strNomFileX;}if(strNomFile=="PC_IMSGEN4"){document.getElementById("PC_NOMIMG4").value=strNomFileX;}if(strNomFile=="PC_IMSGEN5"){document.getElementById("PC_NOMIMG5").value=strNomFileX;}InitImgCat1();},error:function(data,status,e){alert(e);$("#dialogWait").dialog("close");}});return false;}function InitImgCat1(){if(document.getElementById("PC_NOMIMG1").value==""){document.getElementById("PC_IMG1").src="images/image_PNG.png";}else{ImgLoadCat1(document.getElementById("PC_NOMIMG1").value,"PC_IMG1");}if(document.getElementById("PC_NOMIMG2").value==""){document.getElementById("PC_IMG2").src="images/image_PNG.png";}else{ImgLoadCat1(document.getElementById("PC_NOMIMG2").value,"PC_IMG2");}if(document.getElementById("PC_NOMIMG3").value==""){document.getElementById("PC_IMG3").src="images/image_PNG.png";}else{ImgLoadCat1(document.getElementById("PC_NOMIMG3").value,"PC_IMG3");}if(document.getElementById("PC_NOMIMG4").value==""){document.getElementById("PC_IMG4").src="images/image_PNG.png";}else{ImgLoadCat1(document.getElementById("PC_NOMIMG4").value,"PC_IMG4");}if(document.getElementById("PC_NOMIMG5").value==""){document.getElementById("PC_IMG5").src="images/image_PNG.png";}else{ImgLoadCat1(document.getElementById("PC_NOMIMG5").value,"PC_IMG5");}}function ImgLoadCat1(sSrc,strNomImg){var pathArray=document.URL.split("/");var newPathname="";for(i=0;i<pathArray.length-1;i++){newPathname+=pathArray[i]+"/";}newPathname+=sSrc;var oImg=new Image();oImg.onload=function(){document.getElementById(strNomImg).src=oImg.src;};oImg.onerror=function(){document.getElementById(strNomImg).src="images/image_PNG.png";};oImg.src=newPathname+"?time="+new Date();}function GetNomFileCat1(strNom){var pathArray=strNom.split("/");var newPathname=pathArray[pathArray.length-1];return newPathname;}