var Ventana="";var OperaParchivo="";function vta_parchivo(){}function DesactivaPopUp(){var objMainFacPedi=objMap.getScreen(Ventana);objMainFacPedi.bolActivo=false;objMainFacPedi.bolMain=false;objMainFacPedi.bolInit=false;objMainFacPedi.idOperAct=0;}function cargaseleccion(){CPM_ID=document.getElementById("CPM_ID").value;var grid=jQuery("#GRD_ARCHIVOS");grid.setGridParam({url:"CIP_TablaOp.jsp?ID=5&opnOpt=GRID_PAR&_search=true&CPM_ID="+CPM_ID});grid.trigger("reloadGrid");}function ocultar(){document.getElementById("NewGRD_ARCHIVOS").style.display="none";document.getElementById("DelGRD_ARCHIVOS").style.display="none";if(document.getElementById("CPM_NOMBRE").value!=""){document.getElementById("CRD_NUEVO").style.display="block";document.getElementById("GRD_EDITAR").style.display="block";document.getElementById("GRD_BORRAR").style.display="block";var tcseleccion=setTimeout(cargaseleccion,3000);}else{document.getElementById("CRD_NUEVO").style.display="none";document.getElementById("GRD_EDITAR").style.display="none";document.getElementById("GRD_BORRAR").style.display="none";}}function GuardarParametrosArchivo(){var Clave_txt="",Nombre_txt="",Tipo_txt="",Expresion_txt="",Orden_txt="";Clave_txt=document.getElementById("CPM_ID").value;Nombre_txt=document.getElementById("CPMD_NOMBRE_CAMPO").value;Tipo_txt=document.getElementById("CPMD_TIPO").value;Expresion_txt=document.getElementById("CPMD_EXP_REG").value;Orden_txt=document.getElementById("CPMD_ORDEN").value;HayDato_int=document.getElementById("CPMD_ID").value;var strPOST="CPM_ID="+Clave_txt;strPOST+="&CPMD_NOMBRE_CAMPO="+Nombre_txt;strPOST+="&CPMD_TIPO="+Tipo_txt;strPOST+="&CPMD_EXP_REG="+Expresion_txt;strPOST+="&CPMD_ORDEN="+Orden_txt;strPOST+="&CPMD_ID="+HayDato_int;if(OperaParchivo=="_nuevo"){$.ajax({type:"POST",data:strPOST,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_ParametrosArchivo.jsp?ID=1",success:function(datos){if(datos.substring(0,2)=="OK"){alert("El registro se ha guardado correctamente.");$("#dialogPar").dialog("close");var grid2=jQuery("#GRD_ARCHIVOS");grid2.trigger("reloadGrid");document.getElementById("CPMD_NOMBRE_CAMPO").value="";document.getElementById("CPMD_TIPO").value="";document.getElementById("CPMD_EXP_REG").value="";document.getElementById("CPMD_ORDEN").value="";Ventana="POPUP_PA";DesactivaPopUp();}},error:function(objeto,quepaso,otroobj){alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}else{$.ajax({type:"POST",data:strPOST,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_ParametrosArchivo.jsp?ID=3",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Se ha editado correctamente.");$("#dialogPar").dialog("close");var grid2=jQuery("#GRD_ARCHIVOS");grid2.trigger("reloadGrid");document.getElementById("CPMD_NOMBRE_CAMPO").value="";document.getElementById("CPMD_TIPO").value="";document.getElementById("CPMD_EXP_REG").value="";document.getElementById("CPMD_ORDEN").value="";Ventana="POPUP_PA";DesactivaPopUp();}},error:function(objeto,quepaso,otroobj){alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}}function InitEditParchivoEdit(){if(OperaParchivo=="_edit"){$("#dialogPar").dialog("option","title","Editar");var grid=jQuery("#GRD_ARCHIVOS");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var ID=lstRow.CPMD_ID;var CLAVE=lstRow.CPM_ID;var NOMBRE=lstRow.CPMD_NOMBRE_CAMPO;var TIPO=lstRow.CPMD_TIPO;var EXPRESION=lstRow.CPMD_EXP_REG;var ORDEN=lstRow.CPMD_ORDEN;document.getElementById("CPMD_NOMBRE_CAMPO").value=NOMBRE;document.getElementById("CPMD_TIPO").value=TIPO;document.getElementById("CPMD_EXP_REG").value=EXPRESION;document.getElementById("CPMD_ORDEN").value=ORDEN;document.getElementById("CPMD_ID").value=ID;}}else{$("#dialogPar").dialog("option","title","Altas");document.getElementById("CPMD_ID").style.display="none";document.getElementById("CPMD_ID").parentNode.parentNode.style.display="none";document.getElementById("CPMD_NOMBRE_CAMPO").value="";document.getElementById("CPMD_TIPO").value="";document.getElementById("CPMD_EXP_REG").value="";document.getElementById("CPMD_ORDEN").value="";document.getElementById("CPMD_ID").value="";}}function AltaParchivo(){OperaParchivo="_nuevo";OpnOpt("POPUP_PA",null,"dialogPar",false,false,true);}function CancelaGuardarPopUp(){$("#dialogPar").dialog("close");Ventana="POPUP_PA";DesactivaPopUp();}function EditaParchivo(){var grid=jQuery("#GRD_ARCHIVOS");if(grid.getGridParam("selrow")!=null){OperaParchivo="_edit";OpnOpt("POPUP_PA",null,"dialogPar",false,false,true);}else{alert("FAVOR DE SELECCIONAR UN PARAMETRO");}}function EditaParchivoPopUp(){var Clave_txt="",Nombre_txt="",Tipo_txt="",Expresion_txt="",Orden_txt="";Clave_txt=document.getElementById("CPM_ID").value;Nombre_txt=document.getElementById("CPMD_NOMBRE_CAMPO").value;Tipo_txt=document.getElementById("CPMD_TIPO").value;Expresion_txt=document.getElementById("CPMD_EXP_REG").value;Orden_txt=document.getElementById("CPMD_ORDEN").value;HayDato_int=document.getElementById("CPMD_ID").value;var strPOST="CPM_ID="+Clave_txt;strPOST+="&CPMD_NOMBRE_CAMPO="+Nombre_txt;strPOST+="&CPMD_TIPO="+Tipo_txt;strPOST+="&CPMD_EXP_REG="+Expresion_txt;strPOST+="&CPMD_ORDEN="+Orden_txt;strPOST+="&CPMD_ID="+HayDato_int;if(OperaMetas=="_edit"){$.ajax({type:"POST",data:strPOST,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_ParametrosArchivo.jsp?ID=5",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Se ha editado correctamente.");$("#dialogPar").dialog("close");var grid2=jQuery("#GRD_ARCHIVOS");grid2.trigger("reloadGrid");document.getElementById("CPMD_NOMBRE_CAMPO").value="";document.getElementById("CPMD_TIPO").value="";document.getElementById("CPMD_EXP_REG").value="";document.getElementById("CPMD_ORDEN").value="";Ventana="POPUP_PA";DesactivaPopUp();}},error:function(objeto,quepaso,otroobj){alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}else{$.ajax({type:"POST",data:strPOST,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_ParametrosArchivo.jsp?ID=4",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Se ha guardado correctamente.");$("#dialogPar").dialog("close");var grid2=jQuery("#GRD_ARCHIVOS");grid2.trigger("reloadGrid");document.getElementById("CPMD_NOMBRE_CAMPO").value="";document.getElementById("CPMD_TIPO").value="";document.getElementById("CPMD_EXP_REG").value="";document.getElementById("CPMD_ORDEN").value="";Ventana="POPUP_PA";DesactivaPopUp();}},error:function(objeto,quepaso,otroobj){alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}}function CancelaEditaPopUp(){$("#dialogPar").dialog("close");Ventana="POPUP_PA";DesactivaPopUp();}function BorraParchivo(){var grid=jQuery("#GRD_ARCHIVOS");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);var ID=lstRow.CPMD_ID;var op=confirm("Â¿Realmente desea borrar el registro?: ");if(op){var strPost="&CPMD_ID="+ID;$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"html",url:"ERP_ParametrosArchivo.jsp?ID=6",success:function(datos){if(datos.substring(0,2)=="OK"){alert("Se ha eliminado correctamente.");var grid2=jQuery("#GRD_ARCHIVOS");grid2.trigger("reloadGrid");}},error:function(objeto,quepaso,otroobj){alert(":pto:"+objeto+" "+quepaso+" "+otroobj);}});}}else{alert("FAVOR DE SELECCIONAR UN PARAMETRO");}}