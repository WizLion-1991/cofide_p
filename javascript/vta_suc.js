function vta_suc(){}function InitSuc(){ValidaCte();}function ValidaCte(){var intCte=document.getElementById("CT_ID").value;$.ajax({type:"POST",data:"CT_ID="+intCte,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"CIP_TablaOp.jsp?ID=4&opnOpt=CLIENTES",success:function(datoVal){var objCte=datoVal.getElementsByTagName("vta_clientes")[0];document.getElementById("CT_NOM").value=objCte.getAttribute("CT_RAZONSOCIAL");},error:function(objeto,quepaso,otroobj){alert(":hd1:"+objeto+" "+quepaso+" "+otroobj);}});}function dblClickSuc(id){var strNomMain=objMap.getNomMain();var grid=jQuery("#SUC");var lstVal=grid.getRowData(id);if(strNomMain=="vta_sucurs"){document.getElementById("SC_ID").value=lstVal.SC_ID;$("#dialogProv").dialog("close");}else{OpnEdit(document.getElementById("Ed"+strNomMain));}}function AddPercepcion(){var intIdPerc=document.getElementById("PERCEPCIONES").value;var intIdSuc=document.getElementById("SC_ID").value;if(intIdPerc=="0"){alert("Seleccione una Percepciòn");}else{$("#dialogWait").dialog("open");var itemIdCob=0;var strPost="";var boolEsRepetida=0;strPost+="&intIdPerc="+intIdPerc;strPost+="&intIdSuc="+intIdSuc;var grid1=jQuery("#GRID_PERC_NO");var idArr=grid1.getDataIDs();for(var i=0;i<idArr.length;i++){var id=idArr[i];var lstRow=grid1.getRowData(id);if(lstRow.GRID_PERCNO_IDPERC==intIdPerc&&lstRow.GRID_PERCNO_IDBODG==intIdSuc){boolEsRepetida=1;}}if(boolEsRepetida==0){$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_ImpuestoSobreNomina.jsp?id=3",success:function(datos){jQuery("#GRID_PERC_NO").clearGridData();var objsc=datos.getElementsByTagName("Percepcion")[0];var lstProds=objsc.getElementsByTagName("Percepcion_deta");for(var i=0;i<lstProds.length;i++){var obj=lstProds[i];var datarow={GRID_PERCNO_IDPERC:obj.getAttribute("strIdPerc"),GRID_PERCNO_IDBODG:obj.getAttribute("strIdSuc"),GRID_PERCMO_DESCRIPCION:obj.getAttribute("strDescripcion")};itemIdCob++;jQuery("#GRID_PERC_NO").addRowData(itemIdCob,datarow,"last");}$("#dialogWait").dialog("close");},error:function(){jQuery("#GRID_PERC_NO").clearGridData();alert("No hay productos con esas caracteristicas");$("#dialogWait").dialog("close");}});}else{alert("Esa Percepcion ya fue agregada");$("#dialogWait").dialog("close");}}}function CargaGridPercepciones(idx){var itemIdCob=0;var strPost="";var intIdSuc=idx;strPost+="&intIdSuc="+intIdSuc;$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_ImpuestoSobreNomina.jsp?id=4",success:function(datos){jQuery("#GRID_PERC_NO").clearGridData();var objsc=datos.getElementsByTagName("Percepcion")[0];var lstProds=objsc.getElementsByTagName("Percepcion_deta");for(var i=0;i<lstProds.length;i++){var obj=lstProds[i];var datarow={GRID_PERCNO_IDPERC:obj.getAttribute("strIdPerc"),GRID_PERCNO_IDBODG:obj.getAttribute("strIdSuc"),GRID_PERCMO_DESCRIPCION:obj.getAttribute("strDescripcion")};itemIdCob++;jQuery("#GRID_PERC_NO").addRowData(itemIdCob,datarow,"last");}},error:function(){jQuery("#GRID_PERC_NO").clearGridData();}});}function tabShowSucursal(event,ui){var index=ui.newTab.index();var idx=document.getElementById("SC_ID").value;if(index===5){CargaGridPercepciones(idx);}}function DelPercepcion(){var grid=jQuery("#GRID_PERC_NO");if(grid.getGridParam("selrow")!=null){var id=grid.getGridParam("selrow");var lstRow=grid.getRowData(id);if(confirm("Atenciòn: Confirma que desea eliminar ")){var itemIdCob=0;var strPost="";var intIdPerc=lstRow.GRID_PERCNO_IDPERC;var intIdSuc=lstRow.GRID_PERCNO_IDBODG;strPost+="&intIdPerc="+intIdPerc;strPost+="&intIdSuc="+intIdSuc;$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_ImpuestoSobreNomina.jsp?id=5",success:function(datos){jQuery("#GRID_PERC_NO").clearGridData();var objsc=datos.getElementsByTagName("Percepcion")[0];var lstProds=objsc.getElementsByTagName("Percepcion_deta");for(var i=0;i<lstProds.length;i++){var obj=lstProds[i];var datarow={GRID_PERCNO_IDPERC:obj.getAttribute("strIdPerc"),GRID_PERCNO_IDBODG:obj.getAttribute("strIdSuc"),GRID_PERCMO_DESCRIPCION:obj.getAttribute("strDescripcion")};itemIdCob++;jQuery("#GRID_PERC_NO").addRowData(itemIdCob,datarow,"last");}},error:function(){jQuery("#GRID_PERC_NO").clearGridData();}});}}else{alert("Selecciona un registro el la tabla");}}