function vta_controlinventarios(){}function OpnDiagExistBode(){var grid=jQuery("#GRID_CON_INV");if(grid.getGridParam("selrow")!=null){OpnOpt("EX_BODE",null,"dialog",false,false);var objSecModiVta=objMap.getScreen("EX_BODE");objSecModiVta.bolActivo=false;objSecModiVta.bolMain=false;objSecModiVta.bolInit=false;objSecModiVta.idOperAct=0;}else{alert("Debes escoger un producto de la lista");}}function OpnDiagPedPend(){var grid=jQuery("#GRID_CON_INV");if(grid.getGridParam("selrow")!=null){OpnOpt("PED_PEND",null,"dialog",false,false);var objSecModiVta=objMap.getScreen("PED_PEND");objSecModiVta.bolActivo=false;objSecModiVta.bolMain=false;objSecModiVta.bolInit=false;objSecModiVta.idOperAct=0;}else{alert("Debes escoger un producto de la lista");}}function OpnDiagOrdCompPend(){var grid=jQuery("#GRID_CON_INV");if(grid.getGridParam("selrow")!=null){OpnOpt("ORD_COMPRP",null,"dialog",false,false);var objSecModiVta=objMap.getScreen("ORD_COMPRP");objSecModiVta.bolActivo=false;objSecModiVta.bolMain=false;objSecModiVta.bolInit=false;objSecModiVta.idOperAct=0;}else{alert("Debes escoger un producto de la lista");}}function InitDiagExistBode(){var grid=jQuery("#GRID_CON_INV");var idRow=grid.getGridParam("selrow");if(idRow!=null){var lstRow=grid.getRowData(idRow);document.getElementById("EB_CODIGO").value=lstRow.GCI_CODIGO;document.getElementById("EB_DESCRIPCION").value=lstRow.GCI_DESCRIPCION;}}function InitDiagPedPend(){var grid=jQuery("#GRID_CON_INV");var idRow=grid.getGridParam("selrow");if(idRow!=null){var lstRow=grid.getRowData(idRow);document.getElementById("PP_CODIGO").value=lstRow.GCI_CODIGO;document.getElementById("PP_DESCRIPCION").value=lstRow.GCI_DESCRIPCION;document.getElementById("PP_PR_ID").value=lstRow.GCI_PR_ID;}}function InitDiagOrdCompPend(){var grid=jQuery("#GRID_CON_INV");var idRow=grid.getGridParam("selrow");if(idRow!=null){var lstRow=grid.getRowData(idRow);document.getElementById("OCP_CODIGO").value=lstRow.GCI_CODIGO;document.getElementById("OCP_DESCRIPCION").value=lstRow.GCI_DESCRIPCION;document.getElementById("OCP_PR_ID").value=lstRow.GCI_PR_ID;}}function BotonImprimirCI(){OpnOpt("PCO_INV",null,"dialogProv",false,false,true);}function BotonImprimireEB(){OpnOpt("PEX_BOD",null,"dialogProv",false,false,true);}function BotonImprimirPP(){OpnOpt("PPE_PEND",null,"dialogProv",false,false,true);}function BotonImprimirOCP(){OpnOpt("POR_COMPRP",null,"dialogProv",false,false,true);}function OpnDiagProdCI(){OpnOpt("PROD","grid","dialogProd",false,false);}function controlarInventario(){itemIdCob=0;var codigo=document.getElementById("CI_CODIGO").value;var descripcion=document.getElementById("CI_DESCRIPCION").value;var sc_id=document.getElementById("CI_BODEGA").value;var emp_id=document.getElementById("CI_EEMPRESA_ID").value;var pv_id=document.getElementById("CI_PROVEEDOR").value;var categoria1=document.getElementById("CI_CATEGORIA1").value;var categoria2=document.getElementById("CI_CATEGORIA2").value;var categoria3=document.getElementById("CI_CATEGORIA3").value;var categoria4=document.getElementById("CI_CATEGORIA4").value;var categoria5=document.getElementById("CI_CATEGORIA5").value;var categoria6=document.getElementById("CI_CATEGORIA6").value;var categoria7=document.getElementById("CI_CATEGORIA7").value;var categoria8=document.getElementById("CI_CATEGORIA8").value;var categoria9=document.getElementById("CI_CATEGORIA9").value;var categoria10=document.getElementById("CI_CATEGORIA10").value;var strPost="";strPost+="&CI_CODIGO="+codigo;strPost+="&CI_DESCRIPCION="+descripcion;strPost+="&CI_BODEGA="+sc_id;strPost+="&CI_EEMPRESA_ID="+emp_id;strPost+="&CI_PROVEEDOR="+pv_id;strPost+="&CI_CATEGORIA1="+categoria1;strPost+="&CI_CATEGORIA2="+categoria2;strPost+="&CI_CATEGORIA3="+categoria3;strPost+="&CI_CATEGORIA4="+categoria4;strPost+="&CI_CATEGORIA5="+categoria5;strPost+="&CI_CATEGORIA6="+categoria6;strPost+="&CI_CATEGORIA7="+categoria7;strPost+="&CI_CATEGORIA8="+categoria8;strPost+="&CI_CATEGORIA9="+categoria9;strPost+="&CI_CATEGORIA10="+categoria10;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_ReportesGlobales.jsp?id=9",success:function(datos){jQuery("#GRID_CON_INV").clearGridData();var objsc=datos.getElementsByTagName("ControlInventarios")[0];var lstProds=objsc.getElementsByTagName("Producto");var existencia=0;var disponible=0;var pedidos=0;var eglobales=0;var compras=0;for(var i=0;i<lstProds.length;i++){var obj=lstProds[i];var datarow={GCI_PR_ID:obj.getAttribute("PR_ID"),GCI_CODIGO:obj.getAttribute("Codigo"),GCI_DESCRIPCION:obj.getAttribute("Descripcion"),GCI_DISPONIBLES:obj.getAttribute("Disponible"),GCI_PEDIDOS:obj.getAttribute("Pedidos"),GCI_ORDEN_COMPRA:obj.getAttribute("OrdenC"),GCI_E_GLOT:obj.getAttribute("EGlobal"),GCI_EXISTENCIA:obj.getAttribute("Existencia"),GCI_PRECIO1:obj.getAttribute("Prec1"),GCI_PRECIO2:obj.getAttribute("Prec2"),GCI_PRECIO3:obj.getAttribute("Prec3"),GCI_PRECIO4:obj.getAttribute("Prec4"),GCI_CATEGORIA1:obj.getAttribute("Cat1"),GCI_CATEGORIA2:obj.getAttribute("Cat2"),GCI_CATEGORIA3:obj.getAttribute("Cat3"),GCI_CATEGORIA4:obj.getAttribute("Cat4"),GCI_CATEGORIA5:obj.getAttribute("Cat5"),GCI_CATEGORIA6:obj.getAttribute("Cat6"),GCI_CATEGORIA7:obj.getAttribute("Cat7"),GCI_CATEGORIA8:obj.getAttribute("Cat8"),GCI_CATEGORIA9:obj.getAttribute("Cat9"),GCI_CATEGORIA10:obj.getAttribute("Cat10")};existencia+=parseInt(obj.getAttribute("Existencia"));disponible+=parseInt(obj.getAttribute("Disponible"));pedidos+=parseInt(obj.getAttribute("Pedidos"));eglobales+=parseInt(obj.getAttribute("EGlobal"));compras+=parseInt(obj.getAttribute("OrdenC"));itemIdCob++;jQuery("#GRID_CON_INV").addRowData(itemIdCob,datarow,"last");}jQuery("#GRID_CON_INV").footerData("set",{GCI_CODIGO:"Suma:",GCI_ORDEN_COMPRA:compras,GCI_EXISTENCIA:existencia,GCI_DISPONIBLES:disponible,GCI_PEDIDOS:pedidos,GCI_E_GLOT:eglobales});$("#dialogWait").dialog("close");},error:function(){jQuery("#GRID_CON_INV").clearGridData();alert("No hay productos con esas caracteristicas");$("#dialogWait").dialog("close");}});}function existenciaBodegas(frmt){itemIdCob=0;var codigo=document.getElementById("EB_CODIGO").value;var strPost="";strPost+="CI_CODIGO="+codigo;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_ReportesGlobales.jsp?id=10",success:function(datos){jQuery("#GRID_EXIST_BODE").clearGridData();var objsc=datos.getElementsByTagName("ExistenciaBodega")[0];var lstProds=objsc.getElementsByTagName("Producto");var existencia=0;for(var i=0;i<lstProds.length;i++){var obj=lstProds[i];var datarow={GEB_CODIGO:obj.getAttribute("Codigo"),GEB_ALMACEN:obj.getAttribute("Almacen"),GEB_EXISTENCIA:obj.getAttribute("Existencia")};existencia+=parseInt(obj.getAttribute("Existencia"));itemIdCob++;jQuery("#GRID_EXIST_BODE").addRowData(itemIdCob,datarow,"last");}jQuery("#GRID_EXIST_BODE").footerData("set",{GEB_CODIGO:"Suma:",GEB_EXISTENCIA:existencia});$("#dialogWait").dialog("close");},error:function(){jQuery("#GRID_EXIST_BODE").clearGridData();alert("No hay productos con esas caracteristicas");$("#dialogWait").dialog("close");}});}function pedidosPendientes(){itemIdCob=0;var id=document.getElementById("PP_PR_ID").value;var strPost="";strPost+="CI_CODIGO_ID="+id;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_ReportesGlobales.jsp?id=11",success:function(datos){jQuery("#PP_GRID").clearGridData();var objsc=datos.getElementsByTagName("PedidosPendientes")[0];var lstProds=objsc.getElementsByTagName("Producto");var cantidad=0;for(var i=0;i<lstProds.length;i++){var obj=lstProds[i];var datarow={GPP_FOLIO:obj.getAttribute("Folio"),GPP_FECHA:obj.getAttribute("Fecha"),GPP_CLIENTE:obj.getAttribute("Cliente"),GPP_CANTIDAD:obj.getAttribute("Cantidad"),GPP_DOCUMENTO:obj.getAttribute("Documento")};
cantidad+=parseInt(obj.getAttribute("Cantidad"));itemIdCob++;jQuery("#PP_GRID").addRowData(itemIdCob,datarow,"last");}jQuery("#PP_GRID").footerData("set",{GPP_FOLIO:"Suma:",GPP_CANTIDAD:cantidad});$("#dialogWait").dialog("close");},error:function(){jQuery("#PP_GRID").clearGridData();alert("No hay productos con esas caracteristicas");$("#dialogWait").dialog("close");}});}function ordenesCompraPendientes(){itemIdCob=0;var id=document.getElementById("OCP_PR_ID").value;var strPost="";strPost+="CI_CODIGO_ID="+id;$("#dialogWait").dialog("open");$.ajax({type:"POST",data:strPost,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=utf-8",cache:false,dataType:"xml",url:"ERP_ReportesGlobales.jsp?id=12",success:function(datos){jQuery("#OCP_GRID").clearGridData();var objsc=datos.getElementsByTagName("OrdenesCompraPendientes")[0];var lstProds=objsc.getElementsByTagName("Producto");var cantidad=0;for(var i=0;i<lstProds.length;i++){var obj=lstProds[i];var datarow={GOCP_CODIGO:obj.getAttribute("Codigo"),GOCP_PROVEEDOR:obj.getAttribute("Proveedor"),GOCP_ALMACEN:obj.getAttribute("Almacen"),GOCP_FOLIO:obj.getAttribute("Folio"),GOCP_FECHA:obj.getAttribute("Fecha"),GOCP_FENTREGA:obj.getAttribute("Fentrega"),GOCP_CANTIDAD:obj.getAttribute("Cantidad")};cantidad+=parseInt(obj.getAttribute("Cantidad"));itemIdCob++;jQuery("#OCP_GRID").addRowData(itemIdCob,datarow,"last");}jQuery("#OCP_GRID").footerData("set",{GOCP_CODIGO:"Suma:",GOCP_CANTIDAD:cantidad});$("#dialogWait").dialog("close");},error:function(){jQuery("#OCP_GRID").clearGridData();alert("No hay productos con esas caracteristicas");$("#dialogWait").dialog("close");}});}function ImprimirCtrlInvertarios(frmt){var codigo=document.getElementById("CI_CODIGO").value;var descripcion=document.getElementById("CI_DESCRIPCION").value;var sc_id=document.getElementById("CI_BODEGA").value;var emp_id=document.getElementById("CI_EEMPRESA_ID").value;var pv_id=document.getElementById("CI_PROVEEDOR").value;var categoria1=document.getElementById("CI_CATEGORIA1").value;var categoria2=document.getElementById("CI_CATEGORIA2").value;var categoria3=document.getElementById("CI_CATEGORIA3").value;var categoria4=document.getElementById("CI_CATEGORIA4").value;var categoria5=document.getElementById("CI_CATEGORIA5").value;var categoria6=document.getElementById("CI_CATEGORIA6").value;var categoria7=document.getElementById("CI_CATEGORIA7").value;var categoria8=document.getElementById("CI_CATEGORIA8").value;var categoria9=document.getElementById("CI_CATEGORIA9").value;var categoria10=document.getElementById("CI_CATEGORIA10").value;var strPost="";strPost+="&CI_CODIGO="+codigo;strPost+="&CI_DESCRIPCION="+descripcion;strPost+="&CI_BODEGA="+sc_id;strPost+="&CI_EEMPRESA_ID="+emp_id;strPost+="&CI_PROVEEDOR="+pv_id;strPost+="&CI_CATEGORIA1="+categoria1;strPost+="&CI_CATEGORIA2="+categoria2;strPost+="&CI_CATEGORIA3="+categoria3;strPost+="&CI_CATEGORIA4="+categoria4;strPost+="&CI_CATEGORIA5="+categoria5;strPost+="&CI_CATEGORIA6="+categoria6;strPost+="&CI_CATEGORIA7="+categoria7;strPost+="&CI_CATEGORIA8="+categoria8;strPost+="&CI_CATEGORIA9="+categoria9;strPost+="&CI_CATEGORIA10="+categoria10;if(frmt==1){Abrir_Link("ERP_ReportesGlobales.jsp?id=15&boton_1=PDF"+strPost,500,600,0,0);}else{Abrir_Link("ERP_ReportesGlobales.jsp?id=15&boton_1=XLS"+strPost,500,600,0,0);}$("#dialogProv").dialog("close");}function ImpExistenciaBodegas(frmt){var codigo=document.getElementById("EB_CODIGO").value;var descripcion=document.getElementById("EB_DESCRIPCION").value;var strPost="";strPost+="&CI_CODIGO="+codigo;strPost+="&CI_DESCRIPCION="+descripcion;if(frmt==1){Abrir_Link("ERP_ReportesGlobales.jsp?id=16&boton_1=PDF"+strPost,500,600,0,0);}else{Abrir_Link("ERP_ReportesGlobales.jsp?id=16&boton_1=XLS"+strPost,500,600,0,0);}$("#dialogProv").dialog("close");}function ImpPedidosPendientes(frmt){var id=document.getElementById("PP_PR_ID").value;var codigo=document.getElementById("PP_CODIGO").value;var descripcion=document.getElementById("PP_DESCRIPCION").value;var strPost="";strPost+="&CI_CODIGO_ID="+id;strPost+="&CI_CODIGO="+codigo;strPost+="&CI_DESCRIPCION="+descripcion;if(frmt==1){Abrir_Link("ERP_ReportesGlobales.jsp?id=17&boton_1=PDF"+strPost,500,600,0,0);}else{Abrir_Link("ERP_ReportesGlobales.jsp?id=17&boton_1=XLS"+strPost,500,600,0,0);}$("#dialogProv").dialog("close");}function ImpOrdenesComPend(frmt){var id=document.getElementById("OCP_PR_ID").value;var codigo=document.getElementById("OCP_DESCRIPCION").value;var strPost="";strPost+="&CI_CODIGO="+id;strPost+="&CI_DESCRIPCION="+codigo;if(frmt==1){Abrir_Link("ERP_ReportesGlobales.jsp?id=18&boton_1=PDF"+strPost,500,600,0,0);}else{Abrir_Link("ERP_ReportesGlobales.jsp?id=18&boton_1=XLS"+strPost,500,600,0,0);}$("#dialogProv").dialog("close");}